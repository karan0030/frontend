{"ast":null,"code":"import _defineProperty from\"D:\\\\mernproj\\\\projfrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\mernproj\\\\projfrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\mernproj\\\\projfrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Base from'../core/Base';import{Link}from'react-router-dom';import{getCategories,createProduct}from'./helper/adminapicall';import{isAuthenticated}from'../auth/helper';var AddProduct=function AddProduct(){var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var _useState=useState({name:\"\",description:\"\",price:\"\",stock:\"\",photo:\"\",error:\"\",getRedirect:false,formData:\"\",category:\"\",categories:[],loading:false,createdProduct:\"\"}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var name=values.name,description=values.description,price=values.price,stock=values.stock,photo=values.photo,error=values.error,getRedirect=values.getRedirect,formData=values.formData,category=values.category,categories=values.categories,loading=values.loading,createdProduct=values.createdProduct;var preload=function preload(){getCategories().then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{error:error.data}));}else{setValues(_objectSpread(_objectSpread({},values),{},{categories:data,formData:new FormData()}));console.log(categories.name);}}).catch(function(err){return console.log(err);});};useEffect(function(){preload();},[]);var handleChange=function handleChange(name){return function(event){var value=name===\"photo\"?event.target.files[0]:event.target.value;formData.set(name,value);setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},name,value)));};};var onSubmit=function onSubmit(event){event.preventDefault();setValues(_objectSpread(_objectSpread({},values),{},{error:\"\",loading:true}));createProduct(user._id,token,formData).then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{error:data.error}));}else{setValues(_objectSpread(_objectSpread({},values),{},{name:\"\",description:\"\",price:\"\",stock:\"\",photo:\"\",loading:false,createdProduct:data.name}));}});};var successMessage=function successMessage(){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-success mt-3\",style:{display:createdProduct?\"\":\"none\"}},/*#__PURE__*/React.createElement(\"h4\",null,createdProduct,\" Created \"));};var warningMessage=function warningMessage(){if(error){return/*#__PURE__*/React.createElement(\"h4\",{className:\"text-warning\"},\"Adding Product failed !!!! \");}};var createProductForm=function createProductForm(){return/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"span\",null,\"Post photo\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"btn btn-block btn-success\"},/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange(\"photo\"),type:\"file\",name:\"photo\",accept:\"image\",required:true,placeholder:\"choose a file\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange(\"name\"),name:\"photo\",className:\"form-control\",placeholder:\"Name\",required:true,value:name})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"textarea\",{onChange:handleChange(\"description\"),name:\"photo\",className:\"form-control\",placeholder:\"Description\",required:true,value:description})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange(\"price\"),type:\"number\",className:\"form-control\",placeholder:\"Price\",required:true,value:price})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"select\",{onChange:handleChange(\"category\"),className:\"form-control\",placeholder:\"Category\"},/*#__PURE__*/React.createElement(\"option\",null,\"Select\"),categories&&categories.map(function(cate,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,value:cate._id},cate.name);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange(\"stock\"),type:\"number\",className:\"form-control\",placeholder:\"Quantity\",required:true,value:stock})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:onSubmit,className:\"btn btn-outline-success\"},\"Create Product\"));};return/*#__PURE__*/React.createElement(Base,{title:\"Add Product\",description:\"add product\",className:\"container bg-info p-4\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/dashboard\",className:\"btn btn-md btn-dark mb-4\"},\" Admin Home\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row bg-dark text-white rounded\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 offset-md-2 mb-3 mt-3\"},successMessage(),warningMessage(),createProductForm())));};export default AddProduct;","map":{"version":3,"sources":["D:/mernproj/projfrontend/src/admin/AddProduct.js"],"names":["React","useState","useEffect","Base","Link","getCategories","createProduct","isAuthenticated","AddProduct","user","token","name","description","price","stock","photo","error","getRedirect","formData","category","categories","loading","createdProduct","values","setValues","preload","then","data","FormData","console","log","catch","err","handleChange","event","value","target","files","set","onSubmit","preventDefault","_id","successMessage","display","warningMessage","createProductForm","map","cate","index"],"mappings":"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","sourcesContent":["import React ,{useState,useEffect} from 'react';\r\nimport Base from '../core/Base';\r\nimport {Link } from 'react-router-dom'\r\nimport {getCategories, createProduct} from './helper/adminapicall'\r\nimport { isAuthenticated } from '../auth/helper';\r\n\r\n\r\n\r\nconst AddProduct=()=>{\r\n    \r\nconst {user,token}= isAuthenticated();\r\n    const [values,setValues] =useState({\r\n        name:\"\",\r\n        description:\"\",\r\n        price:\"\",\r\n        stock:\"\",\r\n        photo:\"\",\r\n        error:\"\",\r\n        getRedirect:false,\r\n        formData:\"\",\r\n        category:\"\",\r\n        categories:[],\r\n        loading:false,\r\n        createdProduct:\"\"\r\n\r\n    });\r\n   \r\n    const { \r\n            name,description,price,stock,photo,error,getRedirect,formData,category,\r\n            categories,loading,createdProduct\r\n           }= values;\r\n\r\n    const preload =()=>{\r\n        getCategories().then(data=>{\r\n           \r\n            if(data.error){\r\n                setValues({...values,error:error.data})\r\n            }\r\n            else{\r\n                setValues({...values, categories:data, formData:new FormData()})\r\n                console.log(categories.name);\r\n            }\r\n        }).catch(err=>console.log(err))\r\n    }  \r\n    \r\n    useEffect(() => {\r\n        preload()\r\n       \r\n    }, [])\r\n\r\n    const handleChange =name=>event=>{\r\n        const value= name===\"photo\"?event.target.files[0]:event.target.value\r\n        formData.set(name,value)\r\n        setValues({...values,[name]:value})\r\n    }\r\n\r\n    const onSubmit=(event)=>{\r\n        event.preventDefault();\r\n        setValues({...values,error:\"\",loading:true});\r\n        createProduct(user._id,token,formData).then(data=>{\r\n            if(data.error){\r\n                setValues({...values,error:data.error})\r\n            }\r\n            else{\r\n                setValues({...values,\r\n                    name:\"\",\r\n                    description:\"\",\r\n                    price:\"\",\r\n                    stock:\"\",\r\n                    photo:\"\",\r\n                    loading:false,\r\n                    createdProduct:data.name})\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    const successMessage=()=>(\r\n        <div className=\"alert alert-success mt-3\" style={{display : createdProduct?\"\":\"none\"}}>\r\n        <h4>{createdProduct} Created </h4>\r\n        </div>\r\n           \r\n    \r\n       \r\n    )\r\n\r\n    const warningMessage=()=>{\r\n        if(error){\r\n            return <h4 className=\"text-warning\">Adding Product failed !!!! </h4>\r\n        }\r\n       \r\n    }\r\n\r\n    const createProductForm = () => (\r\n        <form >\r\n          <span>Post photo</span>\r\n          <div className=\"form-group\">\r\n            <label className=\"btn btn-block btn-success\">\r\n              <input\r\n                onChange={handleChange(\"photo\")}\r\n                type=\"file\"\r\n                name=\"photo\"\r\n                accept=\"image\"\r\n                required\r\n                placeholder=\"choose a file\"\r\n              />\r\n            </label>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <input\r\n              onChange={handleChange(\"name\")}\r\n              name=\"photo\"\r\n              className=\"form-control\"\r\n              placeholder=\"Name\"required\r\n              value={name}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <textarea\r\n              onChange={handleChange(\"description\")}\r\n              name=\"photo\"\r\n              className=\"form-control\"\r\n              placeholder=\"Description\"required\r\n              value={description}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <input\r\n              onChange={handleChange(\"price\")}\r\n              type=\"number\"\r\n              className=\"form-control\"\r\n              placeholder=\"Price\"required\r\n              value={price}\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <select\r\n              onChange={handleChange(\"category\")}\r\n              className=\"form-control\"\r\n              placeholder=\"Category\"\r\n            >\r\n              <option>Select</option>\r\n              {\r\n                  categories && categories.map((cate,index)=>(\r\n                      <option key={index} value={cate._id} >{cate.name}</option>\r\n                  ))\r\n              }\r\n            </select>\r\n          </div>\r\n          \r\n          <div className=\"form-group\">\r\n            <input\r\n              onChange={handleChange(\"stock\")}\r\n              type=\"number\"\r\n              className=\"form-control\"\r\n              placeholder=\"Quantity\"\r\n              required\r\n              value={stock}\r\n            />\r\n          </div>\r\n          \r\n          <button type=\"submit\" onClick={onSubmit} className=\"btn btn-outline-success\">\r\n            Create Product\r\n          </button>\r\n        </form>\r\n      );\r\n\r\n\r\n\r\n    return(\r\n        <Base title=\"Add Product\" description=\"add product\" className=\"container bg-info p-4\">\r\n         <Link to=\"/admin/dashboard\" className=\"btn btn-md btn-dark mb-4\"> Admin Home</Link>\r\n         <div className=\"row bg-dark text-white rounded\">\r\n         <div className=\"col-md-8 offset-md-2 mb-3 mt-3\">\r\n         {successMessage()}\r\n         {warningMessage()}\r\n          {createProductForm ()}\r\n         </div>\r\n         </div>\r\n        </Base>\r\n    )\r\n}\r\n\r\nexport default AddProduct;"]},"metadata":{},"sourceType":"module"}