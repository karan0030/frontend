{"ast":null,"code":"import _objectSpread from\"D:\\\\mernproj\\\\projfrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\mernproj\\\\projfrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Base from'../core/Base';import{Link}from'react-router-dom';import{getCategory,updateCategory}from'./helper/adminapicall';import{isAuthenticated}from'../auth/helper';var UpdateCategory=function UpdateCategory(_ref){var match=_ref.match;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user,token=_isAuthenticated.token;var _useState3=useState({namex:\"\",getRedirect:false,formData:\"\",error:\"\",loading:false,createdCategory:\"\"}),_useState4=_slicedToArray(_useState3,2),values=_useState4[0],setValues=_useState4[1];var namex=values.namex,error=values.error,getRedirect=values.getRedirect,formData=values.formData,loading=values.loading,createdCategory=values.createdCategory;var preload=function preload(categoryId){getCategory(categoryId).then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{error:error.data}));}else{setValues(_objectSpread(_objectSpread({},values),{},{name:data.name,formData:new FormData()}));console.log(data.name);}}).catch(function(err){return console.log(err);});};useEffect(function(){preload(match.params.categoryId);},[]);var handleChange=function handleChange(event){setName(event.target.value);};//   const handleChange =name=>event=>{\n//     const value= name===\"\"?\"\":event.target.value\n//     setValues({name:event.target.value})\n//     setValues({...values,[name]:event.target.value})\n// }\nvar onSubmit=function onSubmit(event){event.preventDefault();setValues(_objectSpread(_objectSpread({},values),{},{error:\"\",loading:true}));console.log(\" setting \",{name:name},name);updateCategory(match.params.categoryId,user._id,token,{name:name}).then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{error:data.error}));}else{setValues(_objectSpread(_objectSpread({},values),{},{name:\"\",loading:false,createdCategory:data.name}));}});};var successMessage=function successMessage(){return/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-success mt-3\",style:{display:createdCategory?\"\":\"none\"}},/*#__PURE__*/React.createElement(\"h4\",null,createdCategory,\" Updated\"));};var warningMessage=function warningMessage(){if(error){return/*#__PURE__*/React.createElement(\"h4\",{className:\"text-warning\"},\"Update failed !!!! \");}};var createProductForm=function createProductForm(){return/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange,name:\"newname\",className:\"form-control\",placeholder:\"Name\",required:true,value:name})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",onClick:onSubmit,className:\"btn btn-outline-success\"},\"Update Category\"));};return/*#__PURE__*/React.createElement(Base,{title:\"Update Category\",description:\"update category here\",className:\"container bg-info p-4\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/dashboard\",className:\"btn btn-md btn-dark mb-4\"},\" Admin Home\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row bg-dark text-white rounded\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 offset-md-2 mb-3 mt-3\"},successMessage(),warningMessage(),createProductForm())));};export default UpdateCategory;","map":{"version":3,"sources":["D:/mernproj/projfrontend/src/admin/UpdateCategory.js"],"names":["React","useState","useEffect","Base","Link","getCategory","updateCategory","isAuthenticated","UpdateCategory","match","name","setName","user","token","namex","getRedirect","formData","error","loading","createdCategory","values","setValues","preload","categoryId","then","data","FormData","console","log","catch","err","params","handleChange","event","target","value","onSubmit","preventDefault","_id","successMessage","display","warningMessage","createProductForm"],"mappings":"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","sourcesContent":["import React ,{useState,useEffect} from 'react';\r\nimport Base from '../core/Base';\r\nimport {Link } from 'react-router-dom'\r\nimport {getCategory, updateCategory} from './helper/adminapicall'\r\nimport { isAuthenticated } from '../auth/helper';\r\n\r\n\r\n\r\nconst UpdateCategory=({match})=>{\r\n\r\n  const[name,setName]=useState(\"\");\r\nconst {user,token}= isAuthenticated();\r\n    const [values,setValues] =useState({\r\n        namex:\"\",\r\n       \r\n        getRedirect:false,\r\n        formData:\"\",\r\n        error:\"\",\r\n        loading:false,\r\n        createdCategory:\"\"\r\n\r\n    });\r\n   \r\n    const { \r\n            namex,error,getRedirect,formData,loading,createdCategory\r\n           }= values;\r\n\r\n    const preload =(categoryId)=>{\r\n        getCategory(categoryId).then(data=>{\r\n           \r\n            if(data.error){\r\n                setValues({...values,error:error.data})\r\n            }\r\n            else{\r\n                \r\n                setValues({\r\n                    ...values,\r\n                     name:data.name,\r\n                     formData:new FormData\r\n                     \r\n                })\r\n                \r\n                console.log(data.name);\r\n            }\r\n        }).catch(err=>console.log(err))\r\n    }  \r\n    \r\n    \r\n\r\n    useEffect(() => {\r\n        preload(match.params.categoryId)\r\n       \r\n    }, [])\r\n   \r\n \r\n    const  handleChange =event=>{\r\n      \r\n      setName(event.target.value)\r\n      \r\n  }\r\n  //   const handleChange =name=>event=>{\r\n  //     const value= name===\"\"?\"\":event.target.value\r\n  //     setValues({name:event.target.value})\r\n  //     setValues({...values,[name]:event.target.value})\r\n  // }\r\n\r\n    const onSubmit=(event)=>{\r\n        event.preventDefault();\r\n        setValues({...values,error:\"\",loading:true});\r\n        console.log(\" setting \",{name},name);\r\n        updateCategory(match.params.categoryId,user._id,token,{name}).then(data=>{\r\n            if(data.error){\r\n                setValues({...values,error:data.error})\r\n            }\r\n            else{\r\n                setValues({...values,\r\n                    name:\"\",\r\n                    \r\n                    loading:false,\r\n                    createdCategory:data.name})\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    const successMessage=()=>(\r\n        <div className=\"alert alert-success mt-3\" style={{display : createdCategory?\"\":\"none\"}}>\r\n        <h4>{createdCategory} Updated</h4>\r\n        </div>\r\n           \r\n    \r\n       \r\n    )\r\n\r\n    const warningMessage=()=>{\r\n        if(error){\r\n            return <h4 className=\"text-warning\">Update failed !!!! </h4>\r\n        }\r\n       \r\n    }\r\n\r\n    const createProductForm = () => (\r\n        <form >\r\n         \r\n          <div className=\"form-group\">\r\n            <input\r\n              onChange={handleChange}\r\n              name=\"newname\"\r\n              className=\"form-control\"\r\n              placeholder=\"Name\"required\r\n              value={name}\r\n            />\r\n          </div>\r\n          \r\n          \r\n          <button type=\"submit\" onClick={onSubmit} className=\"btn btn-outline-success\">\r\n            Update Category\r\n          </button>\r\n        </form>\r\n      );\r\n\r\n\r\n\r\n    return(\r\n        <Base title=\"Update Category\" description=\"update category here\" className=\"container bg-info p-4\">\r\n         <Link to=\"/admin/dashboard\" className=\"btn btn-md btn-dark mb-4\"> Admin Home</Link>\r\n         <div className=\"row bg-dark text-white rounded\">\r\n         <div className=\"col-md-8 offset-md-2 mb-3 mt-3\">\r\n         {successMessage()}\r\n         {warningMessage()}\r\n          {createProductForm ()}\r\n         </div>\r\n         </div>\r\n        </Base>\r\n    )\r\n}\r\n\r\nexport default UpdateCategory;"]},"metadata":{},"sourceType":"module"}