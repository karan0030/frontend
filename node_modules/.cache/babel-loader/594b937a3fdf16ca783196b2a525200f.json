{"ast":null,"code":"import _defineProperty from\"D:\\\\mernproj\\\\projfrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:\\\\mernproj\\\\projfrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\mernproj\\\\projfrontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Base from'../core/Base';import{Link,Redirect}from'react-router-dom';import{signin,isAuthenticated,authenticate}from\"../auth/helper\";var SignIn=function SignIn(){var _useState=useState({email:\"\",password:\"\",error:\"\",didRedirect:false,loading:false}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var password=values.password,email=values.email,error=values.error,didRedirect=values.didRedirect,loading=values.loading;var _isAuthenticated=isAuthenticated(),user=_isAuthenticated.user;var handleChange=function handleChange(name){return function(event){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({error:false},name,event.target.value)));};};var onSubmit=function onSubmit(event){event.preventDefault();setValues(_objectSpread(_objectSpread({},values),{},{error:false,loading:true}));signin({email:email,password:password}).then(function(data){if(data.error){setValues(_objectSpread(_objectSpread({},values),{},{error:data.error,loading:false}));}else{authenticate(data,function(){setValues(_objectSpread(_objectSpread({},values),{},{didRedirect:true}));});}}).catch(console.log(\"error in sign in \"));};var redirect=function redirect(){if(didRedirect){if(user&&user.role===1){return/*#__PURE__*/React.createElement(Redirect,{to:\"admin/dashboard\"});}return/*#__PURE__*/React.createElement(Redirect,{to:\"user/dashboard\"});}if(isAuthenticated()){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}};var loadingMessage=function loadingMessage(){return loading&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-info\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Loading......\"));};var errorMessage=function errorMessage(){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 offset-sm-3 text-left\"},/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\",style:{display:error?\"\":\"none\"}},error)));};var SignInForm=function SignInForm(){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 offset-sm-3 text-left\"},/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-light\"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",{value:email,className:\"form-control\",onChange:handleChange(\"email\"),type:\"text\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"text-light\"},\"password\"),/*#__PURE__*/React.createElement(\"input\",{onChange:handleChange(\"password\"),value:password,className:\"form-control\",type:\"password\"})),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success btn-block \",onClick:onSubmit},\"Submit\"))));};return/*#__PURE__*/React.createElement(Base,{title:\"Sign In\",description:\"SignIn  for user\"},loadingMessage(),errorMessage(),SignInForm(),redirect(),/*#__PURE__*/React.createElement(\"p\",{className:\"text-center text-white\"},\"pp \",JSON.stringify({values:values})));};export default SignIn;","map":{"version":3,"sources":["D:/mernproj/projfrontend/src/user/Signin.js"],"names":["React","useState","Base","Link","Redirect","signin","isAuthenticated","authenticate","SignIn","email","password","error","didRedirect","loading","values","setValues","user","handleChange","name","event","target","value","onSubmit","preventDefault","then","data","catch","console","log","redirect","role","loadingMessage","errorMessage","display","SignInForm","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport Base from '../core/Base';\r\nimport {  Link,Redirect } from 'react-router-dom'\r\nimport {  signin ,isAuthenticated, authenticate } from \"../auth/helper\";\r\n\r\n\r\nconst SignIn = () => {\r\n\r\n    const [values,setValues] =useState({\r\n        \r\n        email:\"\",\r\n        password:\"\",\r\n        error:\"\",\r\n        didRedirect:false,\r\n        loading:false\r\n\r\n    })\r\n\r\nconst {password,email,error,didRedirect,loading}=values;\r\nconst {user}  = isAuthenticated()\r\n\r\nconst handleChange =name=>event=>{\r\n    setValues({...values,error:false,[name]:event.target.value})\r\n}\r\n\r\nconst onSubmit =event=>{\r\n    event.preventDefault()\r\n    setValues({...values,error:false,loading:true})\r\n    signin({email,password})\r\n    .then(data=>{\r\n        if(data.error){\r\n            setValues({...values ,error:data.error,loading:false})\r\n        }\r\n        else{\r\n\r\n            authenticate(data,()=>{\r\n                setValues({...values,didRedirect:true})\r\n            })\r\n           \r\n\r\n        }\r\n    })\r\n    .catch(console.log(\"error in sign in \"))\r\n}\r\nconst redirect =()=>{\r\n    if(didRedirect){\r\n        if(user && user.role===1){\r\n            return <Redirect to=\"admin/dashboard\"/>\r\n        }\r\n        return <Redirect to=\"user/dashboard\"/>\r\n\r\n    }\r\n    if( isAuthenticated())\r\n    {\r\n        return   <Redirect to=\"/\"/>\r\n\r\n    }\r\n}\r\n\r\nconst loadingMessage = () => {\r\n    return (\r\n        loading && (\r\n            <div className=\"alert alert-info\">\r\n            <h2>Loading......</h2>\r\n            </div>\r\n        )\r\n      );\r\n    };\r\n  \r\n    const errorMessage = () => {\r\n      return (\r\n        <div className=\"row\">\r\n          <div className=\"col-md-6 offset-sm-3 text-left\">\r\n            <div\r\n              className=\"alert alert-danger\"\r\n              style={{ display: error ? \"\" : \"none\" }}\r\n            >\r\n              {error}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    };\r\n\r\n    const SignInForm = () => {\r\n        return (\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-sm-3 text-left\">\r\n                    <form>\r\n                       \r\n                        <div className='form-group'>\r\n                            <label className=\"text-light\">Email</label>\r\n                            <input value={email}className='form-control' \r\n                            onChange={handleChange(\"email\")} type=\"text\"></input>\r\n                        </div>\r\n                        <div className='form-group'>\r\n                            <label className=\"text-light\">password</label>\r\n                            <input\r\n                            onChange={handleChange(\"password\")}  value={password}\r\n                             className='form-control' type=\"password\"></input>\r\n                        </div>\r\n                        <button className=\"btn btn-success btn-block \" onClick={onSubmit} >Submit</button>\r\n                    </form>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        )\r\n    }\r\n    return (\r\n        <Base title=\"Sign In\" description='SignIn  for user'>\r\n    \r\n         {loadingMessage()}\r\n         {errorMessage()}\r\n        {SignInForm()}\r\n        {redirect()}\r\n        <p className=\"text-center text-white\">pp {JSON.stringify({values})}</p>\r\n        \r\n        </Base>\r\n\r\n    )\r\n}\r\n\r\nexport default SignIn;"]},"metadata":{},"sourceType":"module"}